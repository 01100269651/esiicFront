<p class="text-center display-4 fw-bolder">التوزيع علي مراكز التكاليف</p>
<form [formGroup]="totalForm" class="p-2">
<div class="row">

<div class="col-3"  >
    <mat-form-field class="text-dark display-1 fs-5 fw-bolder "  appearance="outline" >
      <mat-label class="text-dark display-1 fs-5 fw-bolder ">اختر المصنع</mat-label>
      <mat-select   class="text-dark display-1 fs-5 fw-bolder "  formControlName="Fact_Id" >
        <mat-option class="text-dark display-1 fs-5 fw-bolder "  *ngFor="let fact of facts" 
        [value]="fact.id"
     
  >{{ fact.name }}</mat-option>
      </mat-select>
    </mat-form-field>
  
  </div>


      
 
  <div class="col-3">
    <mat-form-field class="text-dark display-1 fs-5 fw-bolder " class="example-full-width" appearance="outline">
        <mat-label class="text-dark display-1 fs-5 fw-bolder ">من تاريخ  </mat-label>
        <input class="text-dark display-1 fs-5 fw-bolder " matInput type="date | date : 'yyyy/MM/dd'"
        [class.is-valid]="fTran_Date?.valid" [class.is-invalid]="fTran_Date?.invalid" 
        formControlName="fTran_Date"
        >
      </mat-form-field>
</div>


<div class="col-3">
    <mat-form-field class="text-dark display-1 fs-5 fw-bolder " class="example-full-width" appearance="outline">
        <mat-label class="text-dark display-1 fs-5 fw-bolder ">الي تاريخ  </mat-label>
        <input class="text-dark display-1 fs-5 fw-bolder " matInput type="date | date : 'yyyy/MM/dd'"
        [class.is-valid]="eTran_Date?.valid" [class.is-invalid]="eTran_Date?.invalid" 
        formControlName="eTran_Date"
        >
      </mat-form-field>
</div>




<div class="col-3">
  
      <mat-form-field class="text-dark display-1 fs-5 fw-bolder " appearance="outline" >
        <mat-label class="text-dark display-1 fs-5 fw-bolder " >نوع الحركة</mat-label>
        <mat-select class="text-dark display-1 fs-5 fw-bolder "   [class.is-valid]="Tran_Code?.valid"
         [class.is-invalid]="Tran_Code?.invalid" 
        formControlName="Tran_Code">

          <mat-option class="text-dark display-1 fs-5 fw-bolder "  value="1">وارد</mat-option>
          <mat-option class="text-dark display-1 fs-5 fw-bolder "  value="3">منصرف</mat-option>
        </mat-select>
      </mat-form-field>
     

</div>






<div class="col-2">
  <button class=" col btn btn-outline-primary display-4 fw-bold" (click)="getTot()">أعرض البيانات</button>
</div>

<div class="col">
    
  <mat-form-field>
    <mat-label>بحث</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="ابحث عن أي شئ" #input>
  </mat-form-field>
</div>

</div>
</form>
<div class="card-body">
        

    <div class="card"  *ngIf="!isLoading"  style="overflow-x: scroll; height: 500px;">
        <!-- <h3 class="card-header">
       
        </h3> -->
        <div class="card-body"  >
     
       
          <table class="text-dark mt-1 fs-5 fw-bolder bg-info mt-4"  mat-table [dataSource]="dataSource"  >

            <ng-container matColumnDef="position">
              <th mat-header-cell *matHeaderCellDef >م</th>
              <td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
             
            </ng-container>
    
            <ng-container matColumnDef="fact_Id">
              <th mat-header-cell *matHeaderCellDef>رقم المصنع</th>
              <td mat-cell *matCellDef="let element">{{element.fact_Id ?? ''}}</td>
           
            </ng-container>
            <ng-container matColumnDef="fact_Name">
              <th mat-header-cell *matHeaderCellDef>اسم المصنع</th>
              <td mat-cell *matCellDef="let element">{{element.fact_Name ?? ''}}</td>
            </ng-container>
            

            <ng-container matColumnDef="store_Id">

              <th  mat-header-cell *matHeaderCellDef > رقم مخزن </th>

              <td  mat-cell *matCellDef="let element " >  {{element.store_Id??''}} </td>

            </ng-container>

            
    
            <ng-container matColumnDef="store_Name">

              <th  mat-header-cell *matHeaderCellDef > الاسم </th>

              <td  mat-cell *matCellDef="let element "   > {{element.store_Name??''}} </td>

             
            </ng-container>


            <ng-container matColumnDef="acc">

              <th  mat-header-cell *matHeaderCellDef >م التكلفة</th>

              <td  mat-cell *matCellDef="let element " >  {{element.acc??'0'}} </td>

            </ng-container>

            <ng-container matColumnDef="acc_Name">

              <th  mat-header-cell *matHeaderCellDef >م التكلفة</th>

              <td  mat-cell *matCellDef="let element " >  {{element.acc_Name??'0'}} </td>

            </ng-container>

            
            <ng-container matColumnDef="item_Id">

              <th  mat-header-cell *matHeaderCellDef >رقم الصنف</th>

              <td  mat-cell *matCellDef="let element " >  {{element.item_Id??'0'}} </td>

            </ng-container>

            <ng-container matColumnDef="item_Name">

              <th  mat-header-cell *matHeaderCellDef >اسم الصنف</th>

              <td  mat-cell *matCellDef="let element " >  {{element.item_Name??'0'}} </td>

            </ng-container>
            
            <ng-container matColumnDef="cost_Name">

              <th  mat-header-cell *matHeaderCellDef >اسم المركز</th>

              <td  mat-cell *matCellDef="let element " >  {{element.cost_Name??'0'}} </td>

            </ng-container>

            <ng-container matColumnDef="qty">

              <th  mat-header-cell *matHeaderCellDef > الكمية</th>

              <td  mat-cell *matCellDef="let element " >  {{element.qty??'0'}} </td>

            </ng-container>

            <ng-container matColumnDef="val">

              <th  mat-header-cell *matHeaderCellDef > القيمة</th>

              <td  mat-cell *matCellDef="let element " >  {{element.val??'0'}} </td>

            </ng-container>


            
          
       
         
    
    
            <tr mat-header-row class="text-dark display-1 fs-5 fw-bolder bg-secondary  mt-4" style="z-index: -100;" *matHeaderRowDef="displayedColumns;sticky: true"></tr>
  
            <tr  class="text-dark display-1 fs-5 fw-bolder table-row "  matTooltip="ssss" mat-row  *matRowDef="let row; columns: displayedColumns;"
              ></tr>
     
      
         
          </table>
          <mat-paginator   #paginator [pageSizeOptions]="[4, 10, 20]"
          showFirstLastButtons 
          aria-label="Select page of periodic elements">
</mat-paginator>
          <br>
      
       

        </div>
     </div>
    

     


    
</div>
<div class="text-center" *ngIf="isLoading">
  <app-sh-spinner></app-sh-spinner>
  </div>